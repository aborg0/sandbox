<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Barcode generator app</title>
  </head>
  <body>
    <!--link rel="stylesheet" href="/styles/mystyles.css" /-->

<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>

<!-- link rel="stylesheet" href="lib/Semantic-UI/semantic.css" /-->
<script type="text/javascript" src="lib/Semantic-UI/semantic.min.js"></script>

<!-- link rel="stylesheet" href="/lib/codemirror/lib/codemirror.css" type="text/css"-->
<!-- script type="text/javascript" src="/lib/codemirror/lib/codemirror.js"></script>
<script type="text/javascript" src="/lib/codemirror/mode/xml/xml.js"></script>
<script type="text/javascript" src="/lib/codemirror/mode/htmlmixed/htmlmixed.js"></script>
<script type="text/javascript" src="/lib/codemirror/mode/clike/clike.js"></script-->

<script type="text/javascript" src="lib/three.js/three.min.js"></script>

<script src="resources/OrbitControls.js"></script>
<script src="resources/CSS3DRenderer.js"></script>  

    <!-- Include Scala.js compiled code -->
    <script type="text/javascript" src="./barcodegenerator-opt.js"></script>
	<!-- Include JavaScript dependencies -->
	<script type="text/javascript" src="./barcodegenerator-jsdeps.min.js"></script>
    <!-- Run tutorial.webapp.TutorialApp -->
    <!-- button id="click-me-button" type="button" onclick="com.mind_era.barcodegenerator.DummyApp().addClickedMessage()">Click me!</button-->
    <button id="download" type="button"></button>
    <script type="text/javascript">
      com.mind_era.barcodegenerator.DummyApp().main();
    </script>
    <script type="text/javascript">
    var btn = document.querySelector('button');
var svg = document.querySelector('svg');
var canvas = document.querySelector('canvas');

function triggerDownload (imgURI) {
  var evt = new MouseEvent('click', {
    view: window,
    bubbles: false,
    cancelable: true
  });

  var a = document.createElement('a');
  a.setAttribute('download', 'mcbarcode.svg');
  a.setAttribute('href', imgURI);
  a.setAttribute('target', '_blank');

  a.dispatchEvent(evt);
}

btn.addEventListener('click', function () {
  var data = (new XMLSerializer()).serializeToString(svg);
  var DOMURL = window.URL || window.webkitURL || window;

  var svgBlob = new Blob([data], {type: 'image/svg+xml;charset=utf-8'});
  var url = DOMURL.createObjectURL(svgBlob);

  triggerDownload(url);
});
</script>
  </body>
</html>